<html>
	<head>
		<link href="styles/default.css" type="text/css" rel="stylesheet">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	</head>
	<body>
		<div class="slider">
			<div class="wrapper">
				<div id="1" style="z-index: 17" class="square active"><img src="images/1.jpg" /></div>
				<div id="2" style="z-index: 16" class="square after level1"><img src="images/2.jpg" /></div>
				<div id="3" style="z-index: 15" class="square after level2 "><img src="images/3.jpg" /></div>
				<div id="4" style="z-index: 14" class="square after level2"><img src="images/4.jpg" /></div>
				<div id="5" style="z-index: 13" class="square after level2"><img src="images/5.jpg" /></div>
				<div id="6" style="z-index: 12" class="square after level2"><img src="images/6.jpg" /></div>
				<div id="7" style="z-index: 11" class="square after level2"><img src="images/7.jpg" /></div>
				<div id="8" style="z-index: 10" class="square after level2"><img src="images/8.jpg" /></div>
				<div id="9" style="z-index: 9" class="square after level2"><img src="images/9.jpg" /></div>
				<div id="10" style="z-index: 8" class="square after level2"><img src="images/10.jpg" /></div>
				<div id="11" style="z-index: 7" class="square after level2"><img src="images/11.jpg" /></div>
				<div id="12" style="z-index: 6" class="square after level2"><img src="images/12.jpg" /></div>
				<div id="13" style="z-index: 5" class="square after level2"><img src="images/13.jpg" /></div>
				<div id="14" style="z-index: 4" class="square after level2"><img src="images/14.jpg" /></div>
				<div id="15" style="z-index: 3" class="square after level2"><img src="images/15.jpg" /></div>
				<div id="16" style="z-index: 2" class="square after level2"><img src="images/16.jpg" /></div>
				<div id="17" style="z-index: 1" class="square after level2"><img src="images/17.jpg" /></div>
			</div>
		</div>
		<script>
		// -webkit-box-reflect: below 0px -webkit-gradient(linear, left top, left bottom, from(transparent), to(rgba(250, 250, 250, 0.3)));
		$(document).ready(function(){
			var elements = $(".square").length;
			
			$(".square").each(function(){
			
				/*	place the event listeners	*/
				$(this).on("mouseenter", function(){
					
					/* Determinate the active element */
					var active = parseInt( $(this).attr("id") );
					
					/* Determinate the level1 elements */
					var level1 = {
						"before": active - 1,
						"after": active + 1
					}
					
					/* Determinate the level2 elements */
					var level2 = {
						"before": active - 2,
						"after": active + 2
					}
					
					/*	Go throught all the elements	*/
					for(var x = 0; x < elements; x++){
						var temp = $(".square")[x];
						var thisId = parseInt( $(temp).attr("id") );
						
						/*	Set the z-index	*/
						var distance = active - thisId;
						if(distance < 0){
							distance = distance * (-1);
						}
						$(temp).css("z-index", ( elements - distance ));
						
						/*	If it's the active element	*/
						if(active == thisId){
							$(temp).removeClass("before");
							$(temp).addClass("active");
							$(temp).removeClass("after");
							$(temp).css("z-index", elements);
						}
						
						/*	If its a before element	*/
						else if(active > thisId){
							$(temp).addClass("before");
							$(temp).removeClass("active");
							$(temp).removeClass("after");
						}
						
						/*	If its an after element	*/
						else if(active < thisId){
							$(temp).removeClass("before");
							$(temp).removeClass("active");
							$(temp).addClass("after");
						}
						
						
						/*	If it's a level1 element	*/
						if(level1.before == thisId || level1.after == thisId){
							$(temp).addClass("level1");
							$(temp).removeClass("level2");
						}
						
						else{
							$(temp).removeClass("level1");
							$(temp).addClass("level2");
						
						}
					}
					
					/*	Move the wrapper	*/
					/*	Get the number of slides to the left	*/
					var prevSlides = active - 1;
					
					/*	Get the middle of the screen	*/
					var center = window.innerWidth/2;
					
					/*	Get the active slide width	*/
					var current = parseInt( $("#"+active).width() ) / 2;
					current = 230;
					
					/*	Get the starting place	*/
					var left = center - current - (prevSlides * 115);
					$(".wrapper").css("left", left);
					$(".wrapper").css("margin-left", "0px");
				});
			});
			
			$(document).on("keyup", function(e){
				
				if(e.keyCode == 37 || e.keyCode == 39){
					var elements = $(".square").length;
					var active = parseInt( $(".square.active").attr("id") );
					
					/* Press left <- */
					if(e.keyCode == 37){
						console.log("Go to the left");
						if(active > 1){
							active--;
						}
						else{
							active = elements;
						}
					}
					
					/* Press right -> */
					else if(e.keyCode == 39){
						console.log("Go to the right");
						if(active < elements){
							active++;
						}
						else{
							active = 1;
						}
					}
					
					/* Determinate the level1 elements */
					var level1 = {
						"before": active - 1,
						"after": active + 1
					}
					
					/* Determinate the level2 elements */
					var level2 = {
						"before": active - 2,
						"after": active + 2
					}
					
					/*	Go throught all the elements	*/
					for(var x = 0; x < elements; x++){
						var temp = $(".square")[x];
						var thisId = parseInt( $(temp).attr("id") );
						
						/*	Set the z-index	*/
						var distance = active - thisId;
						if(distance < 0){
							distance = distance * (-1);
						}
						$(temp).css("z-index", ( elements - distance ));
						
						/*	If it's the active element	*/
						if(active == thisId){
							$(temp).removeClass("before");
							$(temp).addClass("active");
							$(temp).removeClass("after");
							$(temp).css("z-index", elements);
						}
						
						/*	If its a before element	*/
						else if(active > thisId){
							$(temp).addClass("before");
							$(temp).removeClass("active");
							$(temp).removeClass("after");
						}
						
						/*	If its an after element	*/
						else if(active < thisId){
							$(temp).removeClass("before");
							$(temp).removeClass("active");
							$(temp).addClass("after");
						}
						
						
						/*	If it's a level1 element	*/
						if(level1.before == thisId || level1.after == thisId){
							$(temp).removeClass("level3");
							$(temp).addClass("level1");
							$(temp).css("z-index", (elements - 1));
						}
						
						/*	If it's a level2 element	*/
						else if(level2.before == thisId || level2.after == thisId){
							$(temp).removeClass("level3");
							$(temp).css("z-index", (elements - 2));
							$(temp).addClass("level2");
						}
					}
					
					
				}
				
			});
		
			$(document).on("mousewheel", function(e){
				console.log(e);
			})
		});
		</script>
	</body>
</html>